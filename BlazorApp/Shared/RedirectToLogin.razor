@inject NavigationManager NavigationManager
@inject ILogger<RedirectToLogin> Logger

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            Logger.LogInformation("RedirectToLogin: Component has been rendered (OnAfterRenderAsync).");

            var returnUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);

            var loginUrl = (string.IsNullOrWhiteSpace(returnUrl) || returnUrl == "/")
                ? "login"
                : $"login?returnUrl={returnUrl}";

            Logger.LogInformation("RedirectToLogin: Attempting to navigate to {LoginUrl}", loginUrl);

            NavigationManager.NavigateTo(loginUrl);
        }

        await base.OnAfterRenderAsync(firstRender);
    }
}

